{% extends "core/base.html" %}
{% load bootstrap4 %}
{% load i18n %}
{% load socialaccount %}
{% load recaptcha2 %}
{% load static from staticfiles %}

{% block title %}{% trans "Register" %}{% endblock title %}

{% block head %}
    {% recaptcha_init %}
{% endblock %}

{% block body %}

    <div class="row">
        <div class="col-md-8 offset-md-2">

            <form method="POST">
                {% csrf_token %}
                <div class="callout">
                    <div class="row">
                        <div class="col-md-12">
                            <h5>{% trans "Register for" %} {% if request.journal %}{{ request.journal.name }}{% else %}
                                {{ request.press.name }}{% endif %}</h5>
                            {%  if not request.GET.token %}
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="card">
                                        <div class="card-block">
                                            <a class="connect-orcid-link" href="{% provider_login_url "orcid" next=request.path %}"><img class="orcid-id-logo" src="{% static "common/img/icons/orcid_16x16.png" %}" width='16' height='16' alt="ORCID iD icon"/>{% trans "Register using ORCID" %}</a><br/>
                                            <a class="help-text" href="#" data-toggle="modal" data-target="#modal-orcid-info">More information about ORCID.</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            {% endif %}
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="card">
                                        <div class="card-block">
                                            <details {% if request.GET.token %}open='true'{% endif %}>
                                                <summary>{% if not request.GET.token %}Register without an ORCID iD{% else %}Register{% endif %}</summary>
                                                <p>{% blocktrans %}Your password should be at minimum 12 characters long. It does not need
                                                    to contain specific characters but you should make it as long as possible. For more
                                                    information read on
                                                    <a href="#" data-toggle="modal" data-target="#passwordmodal"> password guide</a>
                                                    .{% endblocktrans %}</p>

                                                {%  if request.GET.token %}
                                                <div class="form-group">
                                                    ORCID iD<br/>
                                                    <a class="connect-orcid-link" target="_blank" href="https://orcid.org/{{ orcid_id }}"><img class="orcid-id-logo" src="{% static "common/img/icons/orcid_16x16.png" %}" width='16' height='16' alt="ORCID iD icon"/>https://orcid.org/{{ orcid_id }}</a>
                                                </div>
                                                {% endif %}

                                                {% bootstrap_form form %}

                                                <p>By registering an account you agree to our <a href="/site/privacy/">Privacy Policy</a>.</p>
                                                <p>
                                                    <button type="submit" class="btn btn-primary float-right">{% trans "Register" %}</button>
                                                </p>
                                            </details>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </form>

        </div>
    </div>

    <div class="modal fade" id="passwordmodal" tabindex="-1" role="dialog" aria-labelledby="passwordmodal"
         aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">Password Guide</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p class="lead">When it comes to passwords, length is better than complexity.</p>
                    <p>Its a common myth that a short and complex password (Jfjfy&65^87) is more secure than a long and
                        uncomplicated password (our awesome moon base rocks).</p>
                    <p>We recommend selecting a long, but easy to remember password such as <i>our awesome moon base
                        rocks</i> which would take an estimated septillion years to crack as opposed to a complex one
                        like <i>Jfjfy&65^87</i> which would take just over 600 years on a standard computer.</p>

                </div>
            </div>
        </div>
    </div>

    {% include 'elements/orcid_info.html' %}

{% endblock body %}

{% block js %}
  <script src="{% static "common/js/orcid_sandbox_signout.js" %}"></script>
{% endblock %}
